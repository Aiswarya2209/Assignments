<!DOCTYPE html>
<html>
<head>
  <title>Student Data</title>
  <style>
    .fail {
      color: red;
      font-weight: bold;
    }
    table {
      border-collapse: collapse;
      width: 70%;
    }
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
    }
  </style>
</head>
<body>

<h2>All Students</h2>
<ul id="allStudents"></ul>

<h2>Students Scored More Than 60</h2>
<ul id="above60"></ul>

<h2>CSE Students</h2>
<ul id="cseStudents"></ul>

<h2>Students Table</h2>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Marks</th>
      <th>Department</th>
    </tr>
  </thead>
  <tbody id="studentTable"></tbody>
</table>

<h3 id="highest"></h3>
<h3 id="average"></h3>
<h3 id="deptCount"></h3>

<script>
  const students = [
    { id: 1, name: "Ravi", marks: 78, department: "CSE" },
    { id: 2, name: "Anjali", marks: 92, department: "ECE" },
    { id: 3, name: "Suresh", marks: 45, department: "MECH" },
    { id: 4, name: "Divya", marks: 66, department: "CSE" },
    { id: 5, name: "Mahesh", marks: 88, department: "ECE" }
  ];

  // 1. Display all students
  students.forEach(s => {
    const li = document.createElement("li");
    li.textContent = s.name;
    document.getElementById("allStudents").appendChild(li);
  });

  // 2. Marks > 60
  students.filter(s => s.marks > 60).forEach(s => {
    const li = document.createElement("li");
    li.textContent = s.name;
    document.getElementById("above60").appendChild(li);
  });

  // 3. Department count
  const deptCount = students.reduce((acc, s) => {
    acc[s.department] = (acc[s.department] || 0) + 1;
    return acc;
  }, {});
  document.getElementById("deptCount").textContent =
    "Department Count: " + JSON.stringify(deptCount);

  // 4. Highest marks
  const topper = students.reduce((max, s) => s.marks > max.marks ? s : max);
  document.getElementById("highest").textContent =
    `Highest Marks: ${topper.name} (${topper.marks})`;

  // 5. Table display
  students.forEach(s => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${s.name}</td>
      <td class="${s.marks < 50 ? 'fail' : ''}">${s.marks}</td>
      <td>${s.department}</td>
    `;
    document.getElementById("studentTable").appendChild(row);
  });

  // 6. Average marks
  const avg = students.reduce((sum, s) => sum + s.marks, 0) / students.length;
  document.getElementById("average").textContent =
    "Average Marks: " + avg.toFixed(2);

  // 7. Only CSE students
  students.filter(s => s.department === "CSE").forEach(s => {
    const li = document.createElement("li");
    li.textContent = s.name;
    document.getElementById("cseStudents").appendChild(li);
  });

  // 8. Sort by marks (desc)
  const sortedStudents = [...students].sort((a, b) => b.marks - a.marks);
  console.log(sortedStudents);

  // 9. Add new student
  const newStudent = { id: 6, name: "Pooja", marks: 72, department: "MECH" };
  students.push(newStudent);

  const li = document.createElement("li");
  li.textContent = newStudent.name;
  document.getElementById("allStudents").appendChild(li);
</script>

</body>
</html>